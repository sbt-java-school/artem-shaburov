# Школьный чат

### Задание

- Вход в систему по логину – дополнительных проверок не надо делать
- Историю чатов хранить не нужно
- Сервер понимает 2 команды:
- Отправить сообщение пользователю
- Получить все сообщения адресованные текущему пользователю
- Клиент при получении сообщения просто выводит информацию:
- «user >> message_text»
- (* advanced) При входе нового пользователя все участники чата получают
нотификацию (сообщение от пользователя system) 

#### Это многомодульный проект

[core:](https://github.com/sbt-java-school/artem-shaburov/tree/master/chat-core)

Содержит основные сущности, которые используются и на сервере, и на клиенте.
Обмен данными происходит с помощью Request и Response классов содержащихся здесь.
Request содержит в себе команду, которую распознает сервер: AUTH, GET или POST.
Response просто несет в себе какую-то информацию, какой-то ответ.
Также здесь есть сущность Message, в которой хранится имя того, кто послал это сообщение и текст сообщения.

[client:](https://github.com/sbt-java-school/artem-shaburov/tree/master/chat-client)

Основной интерфейс клиентской части - интерфейс Messenger. И его функциональная часть, реализация MessengerClient.
Для упрощения работы со стримами и сокетами, и клиент и сервер содержат HttpService - класс, реализующий пару методов для получения и посылки информации.
Отличительные черты клиента, а точнее интерфейса Messenger, это проверка был ли законнекчен юзер и если мы забыли вызвать коннект, то бросается ConnectionException.
Также, если отправить сообщение юзеру, которого нет на сервере, обратно вернется сообщение, что его нет и будет брошено исключение UserNotFoundException.

[server:](https://github.com/sbt-java-school/artem-shaburov/tree/master/chat-server)

На каждое подключение создается поток. Используется fixedThreadPool с максимальным числом потоков 20.
В классе ClientTask - реализации Runnable, обрабатываются все запросы для этого подключения.
Вся логика построена вокруг класса User. В нем хранятся непрочитанные сообщения для данного юзера и когда он подключается, их можно получить.
Чтобы с юзерами было проще работать, был создан UserDao и его реализация SimpleUserDao, которая хранит юзеров в листе.
